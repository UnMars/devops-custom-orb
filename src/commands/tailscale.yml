description: "Setup Tailscale connection"
parameters:
  authkey:
    type: string
    description: "Tailscale auth key"
  hostname:
    type: string
    default: "circleci-runner"
steps:
  - setup_environment:
      install_node: false
      install_tailscale: true
  - run:
      name: Connect to Tailscale
      command: !include src/commands/scripts/setup-tailscale.sh
      args: [<<parameters.authkey>>, <<parameters.hostname>>]
  - run:
      name: Check Tailscale Status
      command: tailscale status
